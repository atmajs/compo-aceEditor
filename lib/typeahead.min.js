!function(t,e){function n(t){return a[t]||a.atma&&a.atma[t]}var i,r,o,a="undefined"!=typeof global?global:window;if(i=n("mask"),r=n("ruta"),o=n("include"),null==i)throw Error("MaskJS was not loaded");e(a,i,r,o,i.Compo.config.getDOMLibrary())}(this,function(t,e,n,i){i.client().js("../vendor/typeahead.bundle.js").css("../vendor/typeahead.css");var r="Contains search attribute, but the search function not found",o="Invalid array. Expect:\n1) Strings\n2) {id, text}\n3) Look for properties: 'x-prop-id', 'x-prop-text'\n",a=console.warn.bind(console,"A:Typeahead"),s=e.Compo({template:"\n		input.typeahead\n			id='~[: $a.id]'\n			type=text\n			value='~[: $a.value]'\n			style='vertical-align: middle';\n	",meta:{attributes:{"x-prop-id":"string","x-prop-text":"string","?x-prop":"string","?x-search":function(t,n,i){var o=e.Utils.Expression.eval(t,i,null,n);return null==o?void a(r,n,i):o}},template:"join"},slots:{domInsert:function(){var t=this;this.compos.input.typeahead({hint:!0,highlight:!0,minLength:1},{displayKey:"text",source:this.search_.bind(this)}).on("typeahead:selected",function(){t.typeaheadChanged()}).on("keyup",function(e){13===e.which&&t.typeaheadChanged()})}},events:{keydown:function(t){13===t.which&&(t.stopPropagation(),t.preventDefault())},"change: select":function(t){var e=t.currentTarget,n=e.selectedOptions[0];null!=n&&(e.selectedIndex=-1,this.compos.input.typeahead("val",n.textContent))}},compos:{input:"$: input"},onRenderStart:function(t){this.scope={array:this.prepair_(t[this.xProp])}},search_:function(t,e){var n=this;return null==this.xSearch?void e(this.filter_(t,this.scope.array)):void this.xSearch(t,function(t){e(n.prepair_(t))})},filter_:function(t,e){var n=new RegExp(t,"i");return e.filter(function(t){return n.test(t.text)})},type_:"object",prepair_:function(t){var e=this;if(null==t)return[];if(0===t.length)return t;var n={string:function(t){return{id:t,text:t}},object:function(t){return{id:t[e.xPropId],text:t[e.xPropText]}}},i=t[0];return"string"==typeof i?(this.type_="text",t.map(n.string)):void 0!==i[this.xPropText]?t.map(n.object):void 0!==i.text?t:void a(o,i)},get:function(){var t,e,n=this.compos.input.val();return this.xProp?(t=this.model[this.xProp],e=this.xPropText):(t=this.scope.array,e="text"),t.find(function(t){return n===t[e]})},set:function(t){if(null!=t&&null!=this.$){var e="string"!=typeof t?t[this.xPropText]||t.text:t;this.compos.input.typeahead("val",e)}},dispose:function(){this.compos.input.typeahead("destroy")},typeaheadChanged:function(){this.emitOut("typeaheadChanged",this.get())}});e.registerHandler("a:typeahead",s)});
//# sourceMappingURL=typeahead.min.js.map